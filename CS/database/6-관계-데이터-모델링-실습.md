# 관계 데이터 모델링 실습

## 1:N 관계에서의 외래키 표현

학생(기본키:학번)과 교수(기본키:교수번호)의 릴레이션이 있고, 교수와 학생 관계는 1:N이다. <br>
`연관관계의 주인`은 어느 릴레이션에 설정해야 할까? <br>
+ 학생 릴레이션에 교수번호를 외래키로 지정할 경우
  + 학번이라는 기본키에 교수번호라는 하나의 외래키를 가진다.
+ 교수 릴레이션에 학생번호를 외래키로 지정할 경우
  + 교수번호라는 기본키에 여러 학번을 가진다. -> <font color="tomato">튜플의 원자성 위배</font>

### `약한 개체`가 참여하는 일대다 관계는?

비행기(기본키:비행기번호)와 좌석(기본키:좌석번호) 릴레이션이 있다. <br>
> 좌석 릴레이션에서 비행기번호를 외래키로 추가하되, **기본키**로도 설정한다.

<br>

## 1:1 관계에서의 외래키 표현

1. 일반적인 1:1 관계는 외래키를 서로 주고 받는다.

2. 필수적으로 참여하는 릴레이션만 외래키를 받는다.
   <img width="345" alt="image" src="https://user-images.githubusercontent.com/56334513/176133505-7ed0334a-8b06-40a4-aba1-078e74112f20.png">
3. 모든 개체라 필수적으로 참여하면 릴레이션을 하나로 합친다.
   + 혼인 릴레이션에서 남자번호와 여자번호가 각각 외래키로 설정하며 동시에 기본키가 된다.

<br>

## 다중 값 속성은 릴레이션으로 변환한다.

사원 릴레이션, 사원-부하직원 릴레이션으로 나눔
<img width="309" alt="image" src="https://user-images.githubusercontent.com/56334513/176134701-5d8e82a1-9ed9-4a56-86af-d56de3de1d6a.png">
<br>

e.g. 사원A, 부하직원 B,C라면


|사원번호|사원명| 부하직원       |
|----|-----|------------|
|001|사원A| {사원B, 사원C} |

이는 `튜플의 원자성`에 위배된다. <br>
위배되지 않도록 부하직원을 단일 속성으로 나눈다.

|사원번호|사원명| 부하직원     |
|----|-----|----------|
|001|사원A| 사원B |
|001|사원A| 사원C |

단일 속성으로 나누었더니 이번에는 사원번호와 사원명이 중복이며, 사원번호는 기본키로 설정돼있는데 키의 속성 중 `유일성`을 위배한다. <br>
(튜플의 유일성을 위배하는 것은 아님. 부하직원 속성은 다르기 때문. 동일한 튜플이 중복되면 안되는 것임)

### 최종 릴레이션: 릴레이션 자체로 변환
`사원-부하직원 릴레이션`

|사원번호| 부하직원     |
|----|----------|
|001| 사원B |
|001| 사원C |

+ `사원번호`는 외래키이자 기본키
+ `부하직원`은 기본키

