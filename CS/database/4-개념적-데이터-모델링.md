# 데이터베이스 설계 단계

+ **사용자의 다양한 요구 사항을 고려해 데이터베이스를 생성하는 과정**을 말한다. 다른 말로 `E-R 모델`과 `릴레이션 변환 규칙`을 이용한 설계 과정이기도 하다.
+ 유연한 데이터베이스의 설계 - 설계 과정 중에 오류가 발생하면 이전 단계로 돌아가 변경 가능

<img width="211" alt="image" src="https://user-images.githubusercontent.com/56334513/171131128-1bd0f0f6-c2bf-4442-a398-a4b9bc605118.png">

### 1단계. `요구 사항 분석`
+ 요구사항 명세서 산출

### 2단계. `개념적 설계`
+ DBMS에 독립적인 개념적 구조 설계
+ 개념적 스키마(E-R 다이어그램) 산출

### 3단계. `논리적 설계`
+ DBMS에 적합한 논리적 구조 설계
+ 논리적 스키마(릴레이션 스키마) 산출

### 4단계. `물리적 설계`
+ DBMS로 구현 가능한 물리적 구조 설계
+ (이 단계는 기술이 필요한 단계이므로 직접 다루지 않음.)
+ 물리적 스키마 산출

### 5단계. `구현`
+ SQL문으로 DBMS를 통해 데이터베이스 생성

<br>

> 핵심 단계는 요구 사항 분석, 개념적 설계, 논리적 단계 

<br>

# 데이터 모델링과 데이터 모델의 개념

## 데이터 모델링

+ 현실 세계에 존재하는 데이터를 컴퓨터 세계의 데이터베이스에 옮겨서 표현하는 과정

e.g. 현실 세계에 있는 병원과 관련된 데이터(환자 정보, 의사 정보, 약 정보 등)를 컴퓨터 세계에서 데이터베이스에 테이블 형태로 저장. <br>

### 2단계를 거치는 데이터 모델링

+ `개념적 데이터 모델링` (conceptual modeling)
  + 현실 세계에 존재하는 데이터를 개념 세계로 옮김
+ `논리적 데이터 모델링` (logical modeling)
  + 개념 세계의 데이터를 데이터베이스로 옮겨 표현함


**코끼리를 데이터 모델링한다면?**
+ 발이 네 개이고 코가 길며 몸무게는 기본 1톤 이상이다. (개념적 데이터 모델링)
+ 위의 내용을 `추상화`하여 다음과 같이 테이블 형태로 저장한다.
+ `특징`이라는 **컬럼**에 `발이 네 개`, `코가 김`, `몸무게는 1톤 이상`의 형태로 값을 저장. (논리적 데이터 모델링)


## 데이터 모델

#### 데이터 모델링의 결과물을 표현

### 개념적 데이터 모델
+ 사람의 머리로 이해할 수 있게 현실 세계를 개념적 모델링하여 개념적 구조로 표현
+ e.g. E-R 모델

### 논리적 데이터 모델
+ 개념적 구조를 논리적 모델링하여 논리적 구조로 표현
+ e.g. 관계 데이터 모델


# 개체 - 관계 모델

### 개체와 개체 간의 관계를 개념적 구조로 표현한 것
### 핵심 요소는 `개체`, `속성`, `관계`

## 개체-관계 다이어그램

+ E-R 모델을 바탕으로 그림으로 표현한 것

### 개체 (entity)

+ 현실 세계에서 조직을 운영하는 데 필요한 사람 또는 사물
+ 개체마다 구별되는 이름을 가지며, 고유한 속성 하나 이상을 가지고 있음
+ E-R 다이어그램에서 `직사각형`으로 표현
+ e.g. 학교는 선생님, 학생 개체를 필요로 함

> **개체 타입 (entity type)**
+ 개체를 고유한 이름과 속성들로 정의한 것
+ e.g. `학생(이름, 나이, 반, 담임선생님)`

> **개체 인스턴스 (entity instance)**
+ 개체 타입에 따라 실제로 값을 가진 개체
+ 다른 말로 개체 어커런스(entity occurrence)
+ e.g. `(나나나, 20, 1, 신사임당)`

> **개체 집합**
+ 개체 인스턴스의 집합
+ e.g. `(나나나, 15, 1, 신사임당)`, `(가가가, 16, 5, 박혁거세)`

<br>

### 속성

+ **개체나 관계가 가지는 고유의 특성**이며, 가장 작은 논리적 단위이다.
  + E-R 다이어그램에서 `타원`으로 표현


    단일 값 속성 (e.g. 이름)
    다중 값 속성 (e.g. 전화번호(2개 이상 가질 수 있음))
    단순 속성 (e.g. 아이디는 분해 X)
    복합 속성 (e.g. 생년월일은 연, 월, 일을 분할할 수 있음)
    유도 속성 (e.g. 생년월일 속성을 통해 나이 속성을 알 수 있음)

<br>

> **단일값 속성과 다중값 속성** - `속성의 개수`

+ **단일 값 속성**: 값을 하나만 가지는 속성
+ **다중 값 속성**: 값을 여러 개 가지는 속성
  + E-R 다이어그램에서 **이중 타원**으로 표현

> **단순 속성과 복합 속성** - `의미를 분해할 수 있는가`

+ **단순 속성**: 의미를 더이상 분해 X 
+ **복합(composite) 속성**: 의미를 분해 O

> **유도 속성 (derived attribute)**
+ 값이 별도로 저장되진 않음
+ E-R 다이어그램에서 `점선 타원`으로 표현

> **null 속성**

> **키 속성**
+ 각각의 개체 인스턴스를 식별하는 속성이다. 그러므로 개체마다 키 속성 값이 다름
+ E-R 다이어그램에서 `밑줄`로 표현

<br>

###  관계

+ 개체와 개체 간에 의미에 맞게 맺는 것 (Mapping)
+ E-R 다이어그램에서 `마름모`로 표현
+ e.g. 고객 - `구매` -  책

관계의 유형은 **개체 타입의 수**에 대한 기준과 **매핑 카디널리티**에 대한 기준이 있다.

#### 개체 타입의 수
+ **이항 관계**: 개체 타입 두 개끼리
+ **삼항 관계**: 개체 타입 세 개끼리
+ **순환 관계**: 개체 타입 하나가 자기 자신과 맺는 관계를 의미함

#### 매핑 카디널리티

관계를 맺은 두 개체 집합에 대해 각 개체 인스턴스가 연관성을 맺은 개수

> 일대일(1:1) 관계
+ 개체 집합에서 `하나`의 개체 인스턴스는 연관을 맺은 개체 집합의 `하나`의 개체 인스턴스와 관계를 맺는 것
+ e.g. **학생** 개체 집합의 박민호 개체 인스턴스는 **교수** 개체 집합의 홍길동 개체 인스턴스와 관계를 맺음

> 일대다(1:n) 관계 
+ 개체 집합에서 `하나`의 개체 인스턴스는 연관을 맺은 개체 집합의 `여러 개`의 개체 인스턴스와 관계를 맺는 것
+ e.g. **부서** 개체 집합의 영업부 개체 인스턴스는 **사원** 개체 집합의 여러 개체 인스턴스와 관계를 맺음

> 다대다(n:m) 관계
+ 개체 집합에서 `여러 개`의 개체 인스턴스는 연관을 맺은 개체 집합의 `여러 개`의 개체 인스턴스와 관계를 맺는 것

<br>

### 관계의 `참여` 특성
+ 필수적 참여(전체가 참여해야 함) - not null
  + 모든 개체 인스턴스는 반드시 관계에 참여해야 함
  + e.g. 모든 고객은 책을 반드시 구매해야 함
  + E-R 다이어그램에서 `이중선`으로 표현

<img width="382" alt="image" src="https://user-images.githubusercontent.com/56334513/171339781-d2ca3c72-573b-4736-9597-937ff53620e6.png">

+ 선택적 참여(부분적으로 참여함) - null
  + 개체 인스턴스 중 일부만 관계에 참여함
  + e.g. 책을 구매하지 않은 고객이 존재할 수 있음

### 관계의 `종속성`
+ **약한 개체(weak entity)**
  + 오너 개체에 의존적임
+ **오너 개체(owner entity)**
  + 약한 개체의 존재 여부를 결정함

<br>

+ 오너 개체와 약한 개체는 `일대다 관계`를 맺고, 약한 개체는 오너 개체에 대해 `필수적 참여`를 시행한다.
+ 약한 개체는 오너 개체의 키를 포함.
+ E-R 다이어그램에서 약한 개체는 `이중 사각형`으로 표현하고, 관계는 `이중 마름모`로 표현
+ e.g. 직원(오너 개체)과 부양가족(약한 개체)의 부양 관계

<img width="355" alt="image" src="https://user-images.githubusercontent.com/56334513/171341254-dc7b469d-e3b6-466f-9e6f-0ef0a491a358.png">

ERD symbols — From Fundamentals of Database Systems by Ramez Elmasri, Lecture Slides

<br>
<br>

---
참고: 데이터베이스의 원리와 응용 - kocw 한양대학교 백현미 http://www.kocw.net/home/cview.do?cid=9c591659f017851e#.Yo3Yiac_M9w.link